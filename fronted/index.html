<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïù∏Ï≤úÍµ≠Ï†úÍ≥µÌï≠ ÌÜµÌï© ÏïàÎÇ¥ Ï±óÎ¥á</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.1em;
            font-weight: 300;
        }

        .service-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .service-tab {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .service-tab:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .service-tab.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .quick-questions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .quick-question {
            padding: 15px 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 1px solid #dee2e6;
            border-radius: 20px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .quick-question::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .quick-question:hover::before {
            left: 100%;
        }
        
        .quick-question:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .quick-question.parking { border-left: 4px solid #e74c3c; }
        .quick-question.facility { border-left: 4px solid #f39c12; }
        .quick-question.flight { border-left: 4px solid #3498db; }
        .quick-question.general { border-left: 4px solid #2ecc71; }
        
        .chat-container {
            height: 450px;
            overflow-y: auto;
            border: 2px solid #f0f0f0;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            background: #f8f9fa;
            position: relative;
        }

        .chat-container::-webkit-scrollbar {
            width: 8px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .chat-container::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }

        .chat-container::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        .message {
            margin: 15px 0;
            padding: 18px;
            border-radius: 20px;
            max-width: 85%;
            animation: fadeIn 0.4s ease-in;
            position: relative;
        }
        
        .user-message {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            margin-left: auto;
            text-align: right;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .bot-message {
            background: linear-gradient(135deg, #ecf0f1 0%, #bdc3c7 100%);
            color: #2c3e50;
            margin-right: auto;
            white-space: pre-wrap;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .message-info {
            font-size: 0.8em;
            opacity: 0.7;
            margin-top: 8px;
        }
        
        .input-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            position: relative;
        }
        
        input[type="text"] {
            flex: 1;
            padding: 18px 25px;
            border: 2px solid #ddd;
            border-radius: 30px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
            background: white;
        }
        
        input[type="text"]:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        button {
            padding: 18px 35px;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        button:hover {
            background: linear-gradient(135deg, #2980b9 0%, #1f5f8b 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        
        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .loading {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            padding: 20px;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            padding: 10px 15px;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 15px;
            color: #155724;
            font-size: 14px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #28a745;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2em;
                flex-direction: column;
                gap: 10px;
            }
            
            .service-tabs {
                flex-direction: column;
                align-items: center;
            }

            .quick-questions {
                grid-template-columns: 1fr;
            }
            
            .input-container {
                flex-direction: column;
                gap: 10px;
            }
            
            button {
                width: 100%;
            }

            .chat-container {
                height: 350px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                <span>‚úàÔ∏è</span>
                Ïù∏Ï≤úÍµ≠Ï†úÍ≥µÌï≠ ÌÜµÌï© ÏïàÎÇ¥
                <span>üè¢</span>
            </h1>
            <div class="subtitle">Ï£ºÏ∞®Ïû• ¬∑ ÏãúÏÑ§ ¬∑ Ìï≠Í≥µÌé∏ Ï†ïÎ≥¥Î•º Ìïú Î≤àÏóê!</div>
        </div>

        <div class="service-tabs">
            <div class="service-tab active" data-category="all">
                <span>üåü</span> Ï†ÑÏ≤¥ ÏÑúÎπÑÏä§
            </div>
            <div class="service-tab" data-category="parking">
                <span>üöó</span> Ï£ºÏ∞®Ïû•
            </div>
            <div class="service-tab" data-category="facility">
                <span>üè™</span> ÏãúÏÑ§
            </div>
            <div class="service-tab" data-category="flight">
                <span>‚úàÔ∏è</span> Ìï≠Í≥µÌé∏
            </div>
        </div>

        <div class="status-indicator">
            <div class="status-dot"></div>
            <span>Ïã§ÏãúÍ∞Ñ Ï†ïÎ≥¥ ÏÑúÎπÑÏä§ Ïö¥ÏòÅ Ï§ë</span>
        </div>
        
        <div class="quick-questions" id="quickQuestions">
            <!-- Ï†ÑÏ≤¥ ÏÑúÎπÑÏä§ ÏßàÎ¨∏Îì§ -->
            <div class="quick-question general" data-category="all" onclick="askQuestion('DL7897Ìé∏ ÌÉëÏäπ ÏòàÏ†ïÏù∏Îç∞ ÎÇ®Îäî ÏãúÍ∞ÑÎèôÏïà Î≠êÌï†Íπå?')">
                ‚úàÔ∏è Ìï≠Í≥µÌé∏ Î≥Ñ Ï∂îÏ≤ú ÌôúÎèô
            </div>
            <div class="quick-question parking" data-category="all" onclick="askQuestion('T1 Îã®Í∏∞Ï£ºÏ∞®Ïû• ÌòÑÏû¨ ÏÉÅÌô©Í≥º Ï£ºÎ≥Ä ÏãùÎãπ')">
                üöó Ï£ºÏ∞®Ïû• + Ï£ºÎ≥Ä ÏãúÏÑ§
            </div>
            <div class="quick-question facility" data-category="all" onclick="askQuestion('ÌôòÏ†ÑÏÜå ÏúÑÏπòÏôÄ Ïö¥ÏòÅÏãúÍ∞Ñ')">
                üí± ÌôòÏ†ÑÏÜå Ï†ïÎ≥¥
            </div>
            <div class="quick-question flight" data-category="all" onclick="askQuestion('7C1301Ìé∏ Í≤åÏù¥Ìä∏ÏôÄ ÎèÑÏ∞©ÏßÄ ÎÇ†Ïî® Ï†ïÎ≥¥')">
                üå§Ô∏è Ìï≠Í≥µÌé∏ + ÎÇ†Ïî®
            </div>
            
            <!-- Ï£ºÏ∞®Ïû• Ï†ÑÏö© ÏßàÎ¨∏Îì§ -->
            <div class="quick-question parking" data-category="parking" style="display: none;" onclick="askQuestion('T1 Îã®Í∏∞Ï£ºÏ∞®Ïû• ÌòÑÏû¨ ÏÉÅÌô©')">
                üöó T1 Îã®Í∏∞Ï£ºÏ∞®Ïû• ÌòÑÌô©
            </div>
            <div class="quick-question parking" data-category="parking" style="display: none;" onclick="askQuestion('T2 Ïû•Í∏∞Ï£ºÏ∞®Ïû• ÏßÄÍ∏à ÌòºÏû°ÎèÑ')">
                üöó T2 Ïû•Í∏∞Ï£ºÏ∞®Ïû• ÌòºÏû°ÎèÑ
            </div>
            <div class="quick-question parking" data-category="parking" style="display: none;" onclick="askQuestion('Í∞ÄÏû• Ïó¨Ïú†Î°úÏö¥ Ï£ºÏ∞®Ïû•')">
                üöó Ïó¨Ïú†Î°úÏö¥ Ï£ºÏ∞®Ïû•
            </div>
            
            <!-- ÏãúÏÑ§ Ï†ÑÏö© ÏßàÎ¨∏Îì§ -->
            <div class="quick-question facility" data-category="facility" style="display: none;" onclick="askQuestion('T1 Ï∂úÍµ≠Ïû• ÏãùÎãπ Ï∂îÏ≤ú')">
                üçΩÔ∏è Ï∂úÍµ≠Ïû• ÏãùÎãπ Ï∂îÏ≤ú
            </div>
            <div class="quick-question facility" data-category="facility" style="display: none;" onclick="askQuestion('24ÏãúÍ∞Ñ Ïö¥ÏòÅ Ìé∏ÏùòÏãúÏÑ§')">
                üè™ 24ÏãúÍ∞Ñ Ìé∏ÏùòÏãúÏÑ§
            </div>
            <div class="quick-question facility" data-category="facility" style="display: none;" onclick="askQuestion('Î©¥ÏÑ∏Ï†ê ÏúÑÏπòÏôÄ Ïö¥ÏòÅÏãúÍ∞Ñ')">
                üõçÔ∏è Î©¥ÏÑ∏Ï†ê Ï†ïÎ≥¥
            </div>
            <div class="quick-question facility" data-category="facility" style="display: none;" onclick="askQuestion('T2 ÌôòÏ†ÑÏÜå Ïñ¥Îîî ÏûàÏñ¥?')">
                üí± T2 ÌôòÏ†ÑÏÜå ÏúÑÏπò
            </div>
            
            <!-- Ìï≠Í≥µÌé∏ Ï†ÑÏö© ÏßàÎ¨∏Îì§ -->
            <div class="quick-question flight" data-category="flight" style="display: none;" onclick="askQuestion('Ïò§Îäò ÏùºÎ≥∏Ìñâ Ìï≠Í≥µÌé∏')">
                üóæ ÏùºÎ≥∏Ìñâ Ìï≠Í≥µÌé∏
            </div>
            <div class="quick-question flight" data-category="flight" style="display: none;" onclick="askQuestion('ÌòÑÏû¨ ÎÇ†Ïî®ÏôÄ Ìï≠Í≥µÌé∏ ÏòÅÌñ•')">
                üå§Ô∏è ÎÇ†Ïî®ÏôÄ Ìï≠Í≥µÌé∏
            </div>
            <div class="quick-question flight" data-category="flight" style="display: none;" onclick="askQuestion('ÏßÄÏó∞Îêú Ìï≠Í≥µÌé∏ ÏûàÎÇò?')">
                ‚è∞ ÏßÄÏó∞ Ìï≠Í≥µÌé∏ ÌôïÏù∏
            </div>
        </div>
        
        <div class="chat-container" id="chatContainer">
            <div class="message bot-message">
                ÏïàÎÖïÌïòÏÑ∏Ïöî! üéâ Ïù∏Ï≤úÍµ≠Ï†úÍ≥µÌï≠ ÌÜµÌï© ÏïàÎÇ¥ Ï±óÎ¥áÏûÖÎãàÎã§.
                
                üîπ Ï£ºÏ∞®Ïû• ÌòÑÌô© (ÌòºÏû°ÎèÑ, ÏûîÏó¨Í≥µÍ∞Ñ)
                üîπ Í≥µÌï≠ ÏãúÏÑ§ Ï†ïÎ≥¥ (ÌôòÏ†ÑÏÜå, ÏãùÎãπ, Î©¥ÏÑ∏Ï†ê Îì±)
                üîπ Ìï≠Í≥µÌé∏ Ï†ïÎ≥¥ (Ï∂úÎ∞ú/ÎèÑÏ∞© ÏãúÍ∞Ñ, Í≤åÏù¥Ìä∏, ÎÇ†Ïî®)
                üîπ Ïó¨Ìñâ Ï§ÄÎπÑÎ¨º Î∞è Í≥µÌï≠ Ïù¥Ïö© ÌåÅ
                
                Î¨¥ÏóáÏùÑ ÎèÑÏôÄÎìúÎ¶¥ÍπåÏöî? üòä
                
                <div class="message-info">üí° Ìï≠Í≥µÌé∏ Î≤àÌò∏Î•º Ìè¨Ìï®Ìï¥ÏÑú ÏßàÎ¨∏ÌïòÏãúÎ©¥ Îçî Ï†ïÌôïÌïú Ï†ïÎ≥¥Î•º Ï†úÍ≥µÌï¥ÎìúÎ†§Ïöî!</div>
            </div>
        </div>
        
        <div class="input-container">
            <input type="text" id="questionInput" placeholder="Ìï≠Í≥µÌé∏, Ï£ºÏ∞®Ïû•, ÏãúÏÑ§Ïóê ÎåÄÌï¥ Í∂ÅÍ∏àÌïú Ï†êÏùÑ Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî... (Ïòà: KE5741Ìé∏ ÌÉÄÎäîÎç∞ Î≠êÌï†Íπå?)" onkeypress="handleKeyPress(event)">
            <button onclick="sendQuestion()" id="sendButton">Ï†ÑÏÜ°</button>
        </div>
    </div>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const questionInput = document.getElementById('questionInput');
        const sendButton = document.getElementById('sendButton');
        const serviceTabs = document.querySelectorAll('.service-tab');
        const quickQuestions = document.querySelectorAll('.quick-question');

        // ÏÑúÎπÑÏä§ ÌÉ≠ Ï†ÑÌôò Í∏∞Îä•
        serviceTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // ÌôúÏÑ± ÌÉ≠ Î≥ÄÍ≤Ω
                serviceTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Ìï¥Îãπ Ïπ¥ÌÖåÍ≥†Î¶¨ ÏßàÎ¨∏Îì§ ÌëúÏãú
                const category = tab.dataset.category;
                quickQuestions.forEach(q => {
                    if (category === 'all' || q.dataset.category === category) {
                        q.style.display = 'block';
                    } else {
                        q.style.display = 'none';
                    }
                });
            });
        });

        function addMessage(message, isUser = false, category = null, flightNumber = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            let messageContent = message;
            if (!isUser && (category || flightNumber)) {
                messageContent += `\n\n<div class="message-info">`;
                if (category) messageContent += `üìÇ Î∂ÑÎ•ò: ${getCategoryEmoji(category)} ${category}`;
                if (flightNumber) messageContent += ` | ‚úàÔ∏è Ìï≠Í≥µÌé∏: ${flightNumber}`;
                messageContent += `</div>`;
            }
            
            messageDiv.innerHTML = messageContent.replace(/\n/g, '<br>');
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function getCategoryEmoji(category) {
            const emojis = {
                'parking': 'üöó',
                'facility': 'üè™',
                'flight': '‚úàÔ∏è',
                'general': 'üí°',
                'mixed': 'üåü'
            };
            return emojis[category] || 'üìã';
        }

        function addLoadingMessage() {
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'message bot-message loading';
            loadingDiv.innerHTML = 'ÎãµÎ≥ÄÏùÑ ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...';
            loadingDiv.id = 'loadingMessage';
            chatContainer.appendChild(loadingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            return loadingDiv;
        }

        function removeLoadingMessage() {
            const loadingMessage = document.getElementById('loadingMessage');
            if (loadingMessage) {
                loadingMessage.remove();
            }
        }

        async function sendQuestion() {
            const question = questionInput.value.trim();
            if (!question) return;

            // ÏÇ¨Ïö©Ïûê Î©îÏãúÏßÄ Ï∂îÍ∞Ä
            addMessage(question, true);
            
            // ÏûÖÎ†• ÌïÑÎìú Ï¥àÍ∏∞Ìôî Î∞è Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
            questionInput.value = '';
            sendButton.disabled = true;
            
            // Î°úÎî© Î©îÏãúÏßÄ ÌëúÏãú
            const loadingMessage = addLoadingMessage();

            try {
                // API Ìò∏Ï∂ú
                const response = await fetch('/api/chat_parking_rag', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        question: question
                    })
                });

                const data = await response.json();
                
                // Î°úÎî© Î©îÏãúÏßÄ Ï†úÍ±∞
                removeLoadingMessage();
                
                if (data.status === 'success') {
                    addMessage(data.answer, false, data.category, data.flight_number);
                } else {
                    addMessage(`‚ö†Ô∏è Ïò§Î•ò: ${data.message}`, false);
                }
                
            } catch (error) {
                console.error('API Ìò∏Ï∂ú Ïò§Î•ò:', error);
                removeLoadingMessage();
                addMessage('üòÖ Ï£ÑÏÜ°Ìï©ÎãàÎã§. ÏÑúÎ≤Ñ Ïó∞Í≤∞Ïóê Î¨∏Ï†úÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', false);
            }
            
            // Î≤ÑÌäº Ïû¨ÌôúÏÑ±Ìôî
            sendButton.disabled = false;
        }

        function askQuestion(question) {
            questionInput.value = question;
            sendQuestion();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendQuestion();
            }
        }

        // Ï¥àÍ∏∞ Ìè¨Ïª§Ïä§ ÏÑ§Ï†ï
        questionInput.focus();
    </script>
</body>
</html>